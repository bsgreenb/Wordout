{% extends 'backbone/base.html' %}

{% block js %}
<script src="/static/js/plugin/bootstrap-modal.js"></script>
<script>
$(function() {

	$('.checkbox').click(function(){
		if ($('.checkbox:checked').length == 0)
		{
			$('button#edit, button#disable, button#enable').attr("disabled", "disabled");
		}
		else
		{
			$('button#edit, button#disable, button#enable').removeAttr("disabled", "");
		}
	});

	$('#edit').click(function(){
		$('#edit-action-ls').val('');
		
		var sharer = '';
		$('.checkbox:checked').each(function(){
			sharer += $(this).val() + ',';
		});
		$('#edit-action-ls').val(sharer);
	});
	
	$('#disable').click(function(){
		$('#disable-action-ls').val('');
		
		var sharer = '';
		$('.checkbox:checked').each(function(){
			sharer += $(this).val() + ',';
		});
		$('#disable-action-ls').val(sharer);
		$('#disable-form').submit();
	});
	
	$('#enable').click(function(){
		$('#enable-action-ls').val('');
		
		var sharer = '';
		$('.checkbox:checked').each(function(){
			sharer += $(this).val() + ',';
		});
		$('#enable-action-ls').val(sharer);
		$('#enable-form').submit();
	});

})
</script>
{% endblock %}
	

{% block content %}
<h1>Track Actions</h1>

<p>This part is to give a brief instruction</p>

{% if action_type_ls %}
<div id="action">

	<button class="btn" data-keyboard="true" data-backdrop="true" data-controls-modal="create-action-modal-from-dom" id="create-action">Create Action</button>
	<button class="btn" data-keyboard="true" data-backdrop="true" data-controls-modal="edit-action-modal-from-dom" id="edit">Edit</button>
	<button class="btn" id="enable" disabled="disabled">Enable</button>
	<button class="btn" id="disable" disabled="disabled">Disable</button>
	
</div>

<table class="zebra-striped">
	<thead>
		<tr>
			<th class="header">Action ID</th>
			<th class="blue header">Action Name</th>
			<th class="yellow header">Action Description</th>
			<th class="green header">Enable</th>
		</tr>
	</thead>
	<tbody>
		{% for l in action_type_ls%}
			<tr>
				<td><input class="checkbox" type="checkbox" name="action_id" value="{{l.action_id}}"/> {{ l.action_id }}</td>
				<td>
					{{ l.action_name }}
				</td>
				<td>
					{{ l.description }}
				</td>
				<td>
					{{ l.enabled }}
				</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
{% else %}
<button class="btn primary large" data-keyboard="true" data-backdrop="true" data-controls-modal="create-action-modal-from-dom" id="create-sharer">Create Action</button>
{% endif %}

<p>this part is going to describe how to implement the action</p>


<div id="create-action-modal-from-dom" class="modal hide fade" style="display: block;">
	
	<form method="POST" action="/createactions/" id="create-sharer-form">
		{% csrf_token %}
	<div class="modal-header">
		<a class="close" href="#">Ã—</a>
		<h3>Create Action</h3>
	</div>
	
	<div class="modal-body">
			<fieldset>
				<div class="clearfix">
					<label for="action_name">Action Name: </label>
					<div class="input">
						<input id="action_name" type="text" value="" name="action_name" />
					</div>
				</div>
			
				<div class="clearfix">
					<label for="numeric_end">Action Description: </label>
					<div class="input">
						<textarea name="action_description"></textarea>
					</div>
				</div>
			</fieldset>
		
	</div>

	<div class="modal-footer">
		<input class="btn primary" href="#" id="numeric_save" value="Save" type="submit">
	</div>
	</form>
</div>

<form id="disable-form" action="/disableaction/" method="POST" style="display:hidden">
{% csrf_token %}
<input type="hidden" id="disable-action-ls" name="action_ls" value="" />
</form>

<form id="enable-form" action="/enableaction/" method="POST" style="display:hidden">
{% csrf_token %}
<input type="hidden" id="enable-action-ls" name="action_ls" value="" />
</form>

{% endblock %}