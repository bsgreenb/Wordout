{% extends 'base.html' %}

{% block js %}

<script src="static/js/plugin/jquery.tablesorter.min.js"></script>
<script src="static/js/plugin/bootstrap-modal.js"></script>
<script>

$(function() {
$("table#sortTableExample").tablesorter({});
});

</script>

{% endblock %}


{% block right-table %}


{% if error %}
<!-- need loop through ul here -->
<div>{{ error.0.0}}</div>
{% endif %}


<span>total clicks: {{sum_clicks}}</span><!-- data range can go there -->

<p class="pull-right">
	<button class="btn primary" data-keyboard="true" data-backdrop="true" data-controls-modal="numeric-modal-from-dom">+ numeric identifier</button>
	<button class="btn primary" data-keyboard="true" data-backdrop="true" data-controls-modal="custom-modal-from-dom">+ custom identifier</button>
	<button class="btn primary" data-keyboard="true" data-backdrop="true" data-controls-modal="edit-modal-from-dom">edit redirect link</button>
</p>



{% if ls %}
<table id="sortTableExample" class="zebra-striped">
	<thead>
		
		<tr>
			<th class="header">Identifier</th>
			<th class="yellow header headerSortDown">Clicks</th>
			<th class="blue header">Link</th>
			<th class="green header">Enable</th>
		</tr>
	</thead>
	<tbody>
		{% for l in ls%}
			<tr>
				<td>{{ l.identifier }}</td>
				<td>{{ l.num }} <span class="label notice" id="{{l.id}}">detail</span></td>
				<td>
					<div>wordout.me/{{ l.code }}</div>
					<div>{{ l.redirect_link }}</div>
				</td>
				<td>{{ l.enabled }}</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
<!--
<div class="pagination">
	<ul>
			<li class="prev disabled"><a href="#">&larr; Previous</a></li>
			<li class="active"><a href="#">1</a></li>
			<li><a href="#">2</a></li>
			<li><a href="#">3</a></li>
			<li><a href="#">4</a></li>
			<li><a href="#">5</a></li>
			<li class="next"><a href="#">Next &rarr;</a></li>
		</ul>
</div>
-->
{% else %}
<div>Create referral code for your users </div>
{% endif %}

<!------------------------------- -->


<div id="numeric-modal-from-dom" class="modal hide fade" style="display: block;">
	
	<form method="POST" action="/createnumeric/">
		{% csrf_token %}
	<div class="modal-header">
		<a class="close" href="#">×</a>
		<h3>Generate numeric identifiers</h3>
	</div>
	
	<div class="modal-body">
			<fieldset>
				<div class="clearfix">
					<label for="numeric_start">Start number: </label>
					<div class="input">
						<input id="numeric_start" type="text" value="{{default_start}}" name="start" readonly="readonly">
					</div>
				</div>
			
				<div class="clearfix">
					<label for="numeric_end">End number: </label>
					<div class="input">
						<input id="numeric_end" type="text" name="end">
					</div>
				</div>
				
				<div class="clearfix">
					<label for="numeric_redirect_link">Redirect link: </label>
					<div class="input">
						<input id="numeric_redirect_link" type="text" name="redirect_link">
					</div>
				</div>
			</fieldset>
		
	</div>

	<div class="modal-footer">
		<input class="btn primary" href="#" id="numeric_save" value="Save" type="submit">
	</div>
	</form>
</div>

<!------------------------------- -->

<div id="custom-modal-from-dom" class="modal hide fade" style="display: block;">
	<form method="POST" action="/createcustom/">
	{% csrf_token %}
	<div class="modal-header">
		<a class="close" href="#">×</a>
		<h3>Create custom identifiers</h3>
	</div>
	
	<div class="modal-body">
		
			
				<fieldset>
					<div class="clearfix">
						<label for="id_identifier">Identifier:</label>
						<div class="input">
							<input id="id_identifier" type="text" name="identifier">
						</div>
					</div>

					<div class="clearfix">
						<label for="id_redirect_link">Redirect link:</label>
						<div class="input">
							<input id="id_redirect_link" type="text" name="redirect_link">
						</div>
					</div>
						
				</fieldset>
			
	</div>
	
	<div class="modal-footer">
		<input class="btn primary" href="#" id="cusmtom_save" value="Save" type="submit">
	</div>
	</form>
</div>

<!------------------------------- -->


<div id="edit-modal-from-dom" class="modal hide fade" style="display: block;">
	<div class="modal-header">
		<a class="close" href="#">×</a>
		<h3>Edit all redirect links</h3>
	</div>
	<div class="modal-body">
		<form>
			
			<fieldset>
				<div class="clearfix">
					<label for="id_redirect_link">Redirect link:</label>
					<div class="input">
						<input id="id_redirect_link" type="text" name="redirect_link">
					</div>
				</div>
					
			</fieldset>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn primary" href="#">Save</button>
	</div>
</div>



{% endblock %}

	